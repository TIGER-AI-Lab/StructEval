
import csv
from dataclasses import dataclass

@dataclass
class Ingredient:
    name: str
    quantity: float
    unit: str

@dataclass
class Step:
    instruction: str
    duration_minutes: int

@dataclass
class Recipe:
    recipe_id: str
    recipe_name: str
    chef_name: str
    cuisine_type: str
    servings: int
    prep_time_minutes: int
    cook_time_minutes: int
    ingredients: list[Ingredient]
    steps: list[Step]

recipe = Recipe(
    recipe_id="REC001",
    recipe_name="Spaghetti Bolognese",
    chef_name="Chef Giovanni",
    cuisine_type="Italian",
    servings=4,
    prep_time_minutes=20,
    cook_time_minutes=30,
    ingredients=[
        Ingredient("Ground Beef", 500, "grams"),
        Ingredient("Tomato Sauce", 250, "milliliters")
    ],
    steps=[
        Step("Cook the spaghetti in boiling water for 8 minutes.", 8),
        Step("Brown the ground beef in a pan and add the tomato sauce.", 10)
    ]
)

with open("recipe.csv", "w", newline="") as csvfile:
    fieldnames = [
        "recipe_id",
        "recipe_name",
        "chef_name",
        "cuisine_type",
        "servings",
        "prep_time_minutes",
        "cook_time_minutes",
        "ingredient[0].name",
        "ingredient[0].quantity",
        "ingredient[0].unit",
        "ingredient[1].name",
        "ingredient[1].quantity",
        "ingredient[1].unit",
        "step[0].instruction",
        "step[0].duration_minutes",
        "step[1].instruction",
        "step[1].duration_minutes"
    ]
    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)

    writer.writeheader()
    writer.writerow({
        "recipe_id": recipe.recipe_id,
        "recipe_name": recipe.recipe_name,
        "chef_name": recipe.chef_name,
        "cuisine_type": recipe.cuisine_type,
        "servings": recipe.servings,
        "prep_time_minutes": recipe.prep_time_minutes,
        "cook_time_minutes": recipe.cook_time_minutes,
        "ingredient[0].name": recipe.ingredients[0].name,
        "ingredient[0].quantity": recipe.ingredients[0].quantity,
        "ingredient[0].unit": recipe.ingredients[0].unit,
        "ingredient[1].name": recipe.ingredients[1].name,
        "ingredient[1].quantity": recipe.ingredients[1].quantity,
        "ingredient[1].unit": recipe.ingredients[1].unit,
        "step[0].instruction": recipe.steps[0].instruction,
        "step[0].duration_minutes": recipe.steps[0].duration_minutes,
        "step[1].instruction": recipe.steps[1].instruction,
        "step[1].duration_minutes": recipe.steps[1].duration_minutes
    })
