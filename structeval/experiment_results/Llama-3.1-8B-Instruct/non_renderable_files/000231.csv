
import csv
import json

def extract_info(data):
    creature_id = str(data['creature_id'])
    species_name = data['species_name']
    habitat = data['habitat']
    features = data['features']
    abilities = data['abilities']
    diet = data['diet']

    return {
        'creature_id': creature_id,
        'species_name': species_name,
        'habitat.region': habitat['region'],
        'habitat.climate': habitat['climate'],
        'habitat.elevation_range': habitat['elevation_range'],
        'features.size': features['size'],
        'features.color_pattern': features['color_pattern'],
        'features.average_lifespan_years': features['average_lifespan_years'],
        'abilities[0].name': abilities[0]['name'],
        'abilities[0].description': abilities[0]['description'],
        'abilities[0].power_level': abilities[0]['power_level'],
        'abilities[1].name': abilities[1]['name'],
        'abilities[1].description': abilities[1]['description'],
        'abilities[1].power_level': abilities[1]['power_level'],
        'diet.primary_foods': diet['primary_foods']
    }

def main():
    data = '''
    {
        "creature_id": "CR001",
        "species_name": "Mythical Dragon",
        "habitat": {
            "region": "Mountainous regions",
            "climate": "temperate",
            "elevation_range": "sea level to 2000m"
        },
        "features": {
            "size": "2 meters",
            "color_pattern": "Multicolored scales",
            "average_lifespan_years": 50
        },
        "abilities": [
            {
                "name": "Fire breathing",
                "description": "Can breathe fire to attack enemies",
                "power_level": 8
            },
            {
                "name": "Flight",
                "description": "Can fly to traverse the skies",
                "power_level": 9
            }
        ],
        "diet": {
            "primary_foods": "Meat, fish"
        }
    }
    '''
    data = json.loads(data)

    info = extract_info(data)
    with open('creature_info.csv', 'w', newline='') as csvfile:
        fieldnames = list(info.keys())
        writer = csv.DictWriter(csvfile, fieldnames=fieldnames)

        writer.writeheader()
        writer.writerow(info)

if __name__ == "__main__":
    main()
