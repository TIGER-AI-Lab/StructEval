
import csv
import json

def extract_info(description):
    data = json.loads(description)
    creature_id = data['creature_id']
    species_name = data['species_name']
    habitat = data['habitat']
    physical_traits = data['physical_traits']
    abilities = data['abilities']
    diet = data['diet']

    return {
        'creature_id': creature_id,
        'species_name': species_name,
        'habitat.region': habitat['region'],
        'habitat.terrain_type': habitat['terrain_type'],
        'habitat.temperature_celsius': habitat['temperature_celsius'],
        'physical_traits.height_meters': physical_traits['height_meters'],
        'physical_traits.weight_kilograms': physical_traits['weight_kilograms'],
        'physical_traits.skin_color': physical_traits['skin_color'],
        'physical_traits.eye_count': physical_traits['eye_count'],
        'abilities[0].name': abilities[0]['name'],
        'abilities[0].power_level': abilities[0]['power_level'],
        'abilities[1].name': abilities[1]['name'],
        'abilities[1].power_level': abilities[1]['power_level'],
        'diet.primary_food': diet['primary_food'],
        'diet.secondary_food': diet['secondary_food']
    }

def write_to_csv(data, filename):
    with open(filename, 'w', newline='') as csvfile:
        fieldnames = [
            'creature_id',
            'species_name',
            'habitat.region',
            'habitat.terrain_type',
            'habitat.temperature_celsius',
            'physical_traits.height_meters',
            'physical_traits.weight_kilograms',
            'physical_traits.skin_color',
            'physical_traits.eye_count',
            'abilities[0].name',
            'abilities[0].power_level',
            'abilities[1].name',
            'abilities[1].power_level',
            'diet.primary_food',
            'diet.secondary_food'
        ]
        writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
        writer.writeheader()
        writer.writerows(data)

# Example usage
description = '''
{
    "creature_id": "CR001",
    "species_name": "Gloopernaught",
    "habitat": {
        "region": "Tropical",
        "terrain_type": "Forest",
        "temperature_celsius": 25
    },
    "physical_traits": {
        "height_meters": 3.5,
        "weight_kilograms": 120,
        "skin_color": "Green",
        "eye_count": 2
    },
    "abilities": [
        {
            "name": "Camouflage",
            "power_level": 8
        },
        {
            "name": "Regeneration",
            "power_level": 9
        }
    ],
    "diet": {
        "primary_food": "Fruits",
        "secondary_food": "Insects"
    }
}
'''

data = [extract_info(description)]
write_to_csv(data, 'creature_info.csv')
