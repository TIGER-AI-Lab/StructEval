
import json
import xml.etree.ElementTree as ET

json_data = '''
{
  "library": {
    "name": "The Clockwork Library",
    "location": {
      "city": "Gearspring",
      "country": "Steamlantis"
    },
    "sections": {
      "section": [
        {
          "title": "Automaton Fiction",
          "books": {
            "book": [
              { "title": "The Brass Heart", "author": "Elena Cogswell" },
              { "title": "Steam & Shadows", "author": "Victor Valve" }
            ]
          }
        },
        {
          "title": "Chronicles of Time",
          "books": {
            "book": [
              { "title": "Tick Tock Tales", "author": "Harold Pendulum" }
            ]
          }
        }
      ]
    }
  }
}
'''

def json_to_xml(json_str):
    data = json.loads(json_str)
    root = ET.Element("library")
    for key, value in data.items():
        if isinstance(value, dict):
            sub_element = ET.SubElement(root, key)
            for sub_key, sub_value in value.items():
                if isinstance(sub_value, list):
                    for item in sub_value:
                        if isinstance(item, dict):
                            for item_key, item_value in item.items():
                                sub_sub_element = ET.SubElement(sub_element, item_key)
                                sub_sub_element.text = str(item_value)
                else:
                    sub_element.text = str(sub_value)
        else:
            root.text = str(value)
    return ET.tostring(root, encoding='unicode')

xml_data = json_to_xml(json_data)
print(xml_data)
